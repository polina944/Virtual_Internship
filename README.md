# Виртуальная стажировка на курсе PDEV
## Rest API

Компания SkillFactory получила заказ от Федерации Спортивного Туризма России (ФСТР).

ФСТР — организация, занимающаяся развитием и популяризацией спортивного туризма в России и руководящая проведением всероссийских соревнований в этом виде спорта.

---

На сайте [ФСТР](https://pereval.online/) ведёт базу горных перевалов, которая пополняется туристами.

ФСТР заказала студентам SkillFactory разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней.

*Когда турист поднимется на перевал, он сфотографирует его и внесёт нужную информацию с помощью мобильного приложения:*

+ ***координаты объекта и его высоту;***
+ ***название объекта;***
+ ***несколько фотографий;***
+ ***информацию о пользователе, который передал данные о перевале:***
  + ***имя пользователя (ФИО строкой);***
  + ***почта;***
  + ***телефон.***

*После этого турист нажмёт кнопку «Отправить» в мобильном приложении. Мобильное приложение вызовет метод **pereval** твоего REST API.*

```
POST /pereval/
```
Принимает JSON в теле запроса с информацией о перевале. Ниже находится пример такого JSON-а:
```json
{
  "beauty_title": "пер.",
  "title": "Пхия",
  "other_titles": "Триев",
  "connect": "",
 
  "add_time": "2021-09-22 13:18:13",
  "user": {
        "email": "qwerty@mail.ru", 		
        "fam": "Пупкин",
		"name": "Василий",
		"otc": "Иванович",
        "phone": "+7 555 55 55"}, 
 
    "coords":{
  "latitude": 45.3842,
  "longitude": 7.1525,
  "height": 1200},
 
  "level": {"winter": "",
  "summer": "1А",
  "autumn": "1А",
  "spring": ""},
 
   "images": [{"data": "картинка1", "title": "Седловина"}, {"data": "картинка2", "title": "Подъём"}]
}
```
***Результат метода: JSON***

+ *status — код HTTP, целое число:*
 
    *500 — ошибка при выполнении операции;*
    
    *400 — Bad Request (при нехватке полей);*
    
    *200 — успех.*
    
+ *message — строка:*

   *Причина ошибки (если она была);*
    
    *Отправлено успешно;*
    
    *Если отправка успешна, дополнительно возвращается id вставленной записи.*
    
    *id — идентификатор, который был присвоен объекту при добавлении в базу данных.*
    
    
***Примеры oтветов:***

`{ "status": 500, "message": "Ошибка подключения к базе данных","id": null}`

`{ "status": 200, "message": null, "id": 42 }`

***Метод:***
```
GET /pereval/
```
*получает список всех перевалов*

***Метод:***
```
GET /pereval/<id>/
```
*получает одну запись с информацией о перевале*

***Метод:***
```
GET /pereval/?user__email=<email>
```
*получает список объектов перевалов, отправленных пользователем с указанным адресом электронной почты*

***Метод:***
```
PATCH /pereval/<id>/
```
*позволяет отредактировать существующую запись (замена), если она в статусе new.

Редактировать можно все поля, кроме тех, что содержат в себе ФИО, адрес почты и номер телефона. Метод принимает тот же самый json, который принимал уже реализованный тобой метод submitData.*

______

***Документация сгенерирована с помощью библиотеки `drf-yasg`*** 

*Документация **swagger**: http://127.0.0.1:8000/swagger/*<br/>
*Документация **redoc**: http://127.0.0.1:8000/redoc/*

______
***Проект опубликован на хостинге pythonanywhere.com***

*DRF **Api Root**: https://polina90.pythonanywhere.com/*<br/>
*Документация **swagger**: https://polina90.pythonanywhere.com/swagger/*<br/>
*Документация **redoc**: https://polina90.pythonanywhere.com/redoc/*